<!doctype html>
<meta charset="utf-8">
<title>Payment Handler Installer</title>
<p>Payment Handler Installer</p>
<script>
window.addEventListener('message', event => {
  if (event.origin !== window.location.origin) {
    console.log(`Unrecognized origin "${event.origin}"`);
    return;
  }
  if (event.data === 'installAndActivate') {
    navigator.serviceWorker.register('../basic-card.js', {scope: '.'}).then(registration => {
      navigator.serviceWorker.ready.then(() => {
        event.source.postMessage('success', window.location.origin);
      });
    });
  } else {
    event.source.postMessage(`Unrecognized command "${event.data}"`, window.location.origin);
  }
});
</script>
